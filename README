The GNU Hurd
============

This is not the GNU Hurd.  But it might become it at some day.

The intention is to port the GNU Hurd to run on the L4 microkernel.

This is work in progress.


How to build
------------

Building the code is straight forward:

$ autoreconf -f -i -s
$ ./configure --enable-maintainer-mode --prefix=/l4
$ make
$ make install
$ mkdir /l4/boot
$ install -s laden/laden /l4/boot
$ install -s wortel/wortel /l4/boot
$ install -s physmem/physmem /l4/boot
$ install -s task/task /l4/boot

You need at least automake 1.7 and autoconf 2.53.  Note that the
binaries MUST be stripped, otherwise they will overlap in memory (or
you can adjust the load addresses).


Installation on ia32
--------------------

Prerequisites: Pistachio-0.4.  You can find information about how to
download the Pistachio source distribution (which includes the kernel
and sigma0) at the following URL:

http://www.l4ka.org/projects/pistachio/download.php

sigma0 must be built with a different link base than the default value
0x20000, because that conflicts with GRUB (on ia32).  I have
successfully used a link base of 0x40000.  Use the configure option
--with-s0-linkbase=0x40000 when configuring the user space of the L4
distribution.

You only need the ia32-kernel and sigma0 binary from the L4
distribution.  You may want to install the other programs and
utilities as well to test your L4 kernel, though.

Then set up GRUB to boot laden as the kernel, and the L4 kernel,
sigma0, wortel (the rootserver), physmem and task as its modules (in
that order).  Also, add some dummy entries for the not-yet-existing
modules deva, deva-store and rootfs (just repeat the task server entry
another three times)

Try the debug option (-D) to laden and wortel to see some output from
them.  They are silent by default.

Here is an example menu.lst file for GNU GRUB:

title The GNU Hurd on L4
root (hd0,0)
kernel /boot/laden -D
module /boot/ia32-kernel
module /boot/sigma0
module /boot/wortel -D
module /boot/physmem
module /boot/task
module /boot/task
module /boot/task
module /boot/task
