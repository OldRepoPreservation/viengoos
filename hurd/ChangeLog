2007-11-29  Neal H. Walfield  <neal@gnu.org>

	* activity.h: Include <hurd/addr.h>.
	Add method id RM_activity_properties.
	(ACTIVITY_PROPERTIES_PRIORITY_SET): Define.
	(ACTIVITY_PROPERTIES_WEIGHT_SET): Likewise.
	(ACTIVITY_PROPERTIES_STORAGE_QUOTA_SET): Likewise.
	(ACTIVITY_PROPERTIES_ALL_SET): Likewise.
	(activity_properties): New declaration.
	* rpc.h (RPC53): New macro.

2007-11-28  Neal H. Walfield  <neal@gnu.org>

	* Makefile.am (includehurd_HEADERS): Add activity.h.
	* headers.m4: Create link from ../include/hurd/activity.h to
	activity.h.
	* activity.h: New file.

2007-11-28  Neal H. Walfield  <neal@gnu.org>

	* cap.h (cap_types_compatible): New function.

2007-11-23  Neal H. Walfield  <neal@gnu.org>

	* thread.h: Include <hurd/addr-trans.h>.
	(HURD_EXREGS_EXCEPTION_THREAD): New definition.
	(trans_exregs): Take two additional arguments for determining how
	to copy the aspace address translation bits.  Update callers.
	(thread_stop): New function.
	* rpc.h (RPC12_4): New macro.
	(RPC13_4): Likewise.

	* exceptions.h (exception_handler_init): New declaration.
	(exception_handler_loop): Likewise.

2007-11-22  Neal H. Walfield  <neal@gnu.org>

	* Makefile.am (includehurd_HEADERS): Add thread.h.
	* headers.m4: Link $(BUILDIR)/include/hurd/thread.h to thread.h.
	* thread.h: New file.
	* rpc.h: Include <errno.h>.

2007-11-22  Neal H. Walfield  <neal@gnu.org>

	* cap.h (cap_copy_x): Use CAP_COPY_COPY_ADDR_TRANS_GUARD, not
	CAP_COPY_COPY_GUARD.  Use CAP_COPY_COPY_ADDR_TRANS_SUBPAGE, not
	Use CAP_COPY_COPY_SUBPAGE.  Support CAP_COPY_COPY_SOURCE_GUARD.

2007-11-22  Neal H. Walfield  <neal@gnu.org>

	* rpc.h (RPC_UNMARSHAL): Only assert that IDX is equal to the
	number of untyped words if the error code is 0.

	(RPC63): New macro.
	(RPC74): Likewise.
	(RPC11_4): Likewise.

2007-11-19  Neal H. Walfield  <neal@gnu.org>

	* Makefile.am (includehurd_HEADERS): Add exceptions.h.
	* headers.m4: Link $(BUILDIR)/include/hurd/exceptions.h to
	exceptions.h.
	* exceptions.h: New file.

2007-11-19  Neal H. Walfield  <neal@gnu.org>

	* addr.h (ADDR_TO_PTR): Assert that the address corresponds to a
	pointer, not the root of a mapped page.  Update callers.
	(PTR_TO_ADDR): Return an address corresponding to a pointer, not
	the root of a mapped page.  Update callers.

2007-11-19  Neal H. Walfield  <neal@gnu.org>

	* Makefile.am (includehurd_HEADERS): Add rpc.h.
	* headers.m4: Link $(BUILDIR)/include/hurd/rpc.h to rpc.h.
	* rpc.h: New file.  Moved and generalized definitions RPC template
	definitions here from ../viengoos/rm.h.
	(RPC_CONCAT2): New macro.
	(RPC_CONCAT): Likewise.
	(RPC_STUB_PREFIX): Likewise.  Use it to generate the stub names.
	(RPC_STUB_PREFIX_): New macro.
	(RPC_ID_PREFIX): Likewise.  Use it to generate method ids.
	(RPC_ID_PREFIX_): New macro.
	(RPC_TARGET): Make sure this macro is defined.
	(RPC_TARGET_ARG_): Define.
	(RPC_TARGET_): Define.
	(RPC_MARSHAL): New macro.
	(RPC_UNMARSHAL): New macro.
	(RPCX): Use the above macros.  Take four additional arguments, the
	list of in and out parameters with and without types.  Update
	users.  General marshal and unmarshal stubs.
	(RPCLOAD): Append argument to *MSG.
	(RPCSTORE): Store from *MSG, not registers.

2007-11-16  Neal H. Walfield  <neal@gnu.org>

	* addr-trans.h: New file.
	* addr.h: Likewise.
	* cap.h: Likewise.
	* folio.h: Likewise.
	* stddef.h: Likewise.
	* startup.h: Include <hurd/addr.h> and <stddef.h>.  Don't include
	<sys/types.h>.
	(HURD_STARTUP_ADDR): Don't define.
	(HURD_STARTUP_SIZE_LOG2): Likewise.
	(HURD_STARTUP_SIZE): Likewise.
	(struct hurd_startup_cap): Remove definition.
	(struct hurd_startup_map): Likewise.
	(HURD_STARTUP_FLAG_SECURE): Don't define.
	(HURD_STARTUP_FLAG_BOOTSTRAP): Likewise.
	(struct hurd_object_desc): New definition.
	(struct hurd_startup_data): Remove fields wortel, task, image,
	mapc, mapv, entry_point, startup, physmem_master, task_master,
	deva_master and deva_console.  Add fields rm, activity, thread,
	descs and desc_count.
	* types.h: Rewrite.
	* t-addr-trans.c: New file.
	* t-addr.c: New file.
	* Makefile.am (COMMON_CPPFLAGS): New variable.
	(includehurd_HEADERS): Add stddef.h, addr.h, addr-trans.h, cap.h
	and folio.h.
	(TESTS): New variable.
	(check_PROGRAMS): Likewise.
	(t_addr_CPPFLAGS): Likewise.
	(t_addr_SOURCES): Likewise.
	(t_addr_trans_CPPFLAGS): Likewise.
	(t_addr_trans_SOURCES): Likewise.
	* headers.m4: Link $(BUILDIR)/include/hurd/stddef.h to stddef.h,
	link $(BUILDIR)/include/hurd/addr.h to addr.h, link
	$(BUILDIR)/include/hurd/addr-trans.h to addr-trans.h, link
	$(BUILDIR)/include/hurd/cap.h to cap.h, and link
	$(BUILDIR)/include/hurd/folio.h to hurd/folio.h.

2005-01-30  Marcus Brinkmann  <marcus@gnu.org>

	* startup.h (struct hurd_startup_data): New members
	PHYSMEM_MASTER, TASK_MASTER, DEVA_MASTER, DEVA_CONSOLE.

2005-01-27  Marcus Brinkmann  <marcus@gnu.org>

	* startup.h (HURD_STARTUP_FLAG_SECURE): New macro.
	(struct hurd_startup_data): New member FLAGS.

2005-01-26  Marcus Brinkmann  <marcus@gnu.org>

	* startup.h (struct hurd_startup_data): New members envz and
	envz_len.

	* Makefile.am (includehurd_HEADERS): Add startup.h.

2004-12-01  Neal H. Walfield  <neal@gnu.org>

	* types.h (HURD_CAP_CLIENT_ID_BITS): Move to
	../libhurd-cap-server/cap-server-internal.h.  Prepend
	underscore.
	(HURD_CAP_ID_BITS): Likewise.
	(_HURD_CAP_CLIENT_ID_MASK): Likewise.
	(_HURD_CAP_ID_MASK): Likewise.
	(hurd_cap_id_t): Likewise.
	(hurd_cap_client_id_t): Likewise.
	(hurd_cap_client_id): Likewise.
	(hurd_cap_id): Likewise.
	(hurd_cap_handle_make): Likewise.

2004-11-02  Marcus Brinkmann  <marcus@gnu.org>

	* startup.h (struct hurd_startup_data): Add new member task.

2004-10-27  Marcus Brinkmann  <marcus@gnu.org>

	* startup.h (struct hurd_startup_data): New member UTCB_AREA.
	(struct hurd_startup_cap): Rename member cap_id to cap_handle, and
	change its type accordingly.

2004-10-26  Marcus Brinkmann  <marcus@gnu.org>

	* startup.h: New file.
	* headers.m4: Add hurd/startup.h.

2004-04-09  Marcus Brinkmann  <marcus@gnu.org>

	* types.h (hurd_cap_t): Rename to ...
	(hurd_cap_handle_t): ... this.  Likewise for all users.

	* types.h (hurd_cap_make): Use bit-wise OR, not logical OR.

2004-04-07  Marcus Brinkmann  <marcus@gnu.org>

	* types.h (hurd_cap_make): New function.
	(_HURD_CAP_CLIENT_ID_MASK, _HURD_CAP_ID_MASK): New macros.

2004-04-01  Marcus Brinkmann  <marcus@gnu.org>

	* types.h: Include <l4/thread.h>.

2004-03-25  Marcus Brinkmann  <marcus@gnu.org>

	* types.h: Protect inclusion with _HURD_TYPES_H.

2004-03-22  Marcus Brinkmann  <marcus@gnu.org>

	* Makefile.am: New file.
	* headers.m4: New file.
	* types.h: New file.	
