2003-09-25  Marcus Brinkmann  <marcus@gnu.org>

	* l4/types.h (_L4_BITFIELD5): Fix macro definition.

2003-09-24  Maurizio Boriani  <debauxit@yahoo.it>
 
	* l4/types.h (_L4_BITFIELD4): Fix macro definition.
	(_L4_BITFIELD6): Was defined twice.  The second instance is
	renamed to ...
	(_L4_BITFIELD7): ... this.

2003-09-22  Marcus Brinkmann  <marcus@gnu.org>

	* headers.m4: Add arch-dependent files using a shell variable.
	* headers-ia32.m4, headers-powerpc.m4: Files removed.

	* Makefile.am (ARCH_SUBDIR) [ARCH_POWERPC]: Add powerpc.
	* headers-powerpc.m4: New file.
	* powerpc/Makefile.am: New file.
	* powerpc/l4/bits/ipc.h, powerpc/l4/bits/space.h,
	powerpc/l4/bits/types.h, powerpc/l4/bits/kip.h,
	powerpc/l4/bits/stubs-init.h, powerpc/l4/bits/vregs.h,
	powerpc/l4/bits/math.h, powerpc/l4/bits/stubs.h,
	powerpc/l4/bits/misc.h, powerpc/l4/bits/syscall.h: New files.
	
2003-09-19  Marcus Brinkmann  <marcus@gnu.org>

	* l4/init.h: Include <l4/syscall.h>

2003-09-18  Marcus Brinkmann  <marcus@gnu.org>

	* Makefile.am (nobase_include_HEADERS): Add l4/init.h.
	* headers.m4: Likewise.

	* l4/kip.h (L4_MIN_PAGE_SIZE): New macro.
	(l4_memory_desc_high): Return the address of the last byte, not
	the byte following it, according to 20030912 version of the L4 X.2
	specification, revision 4.

	* l4/types.h (__L4_PRI_PREFIX, L4_PRIdWORD, L4_PRIiWORD,
	L4_PRIoWORD, L4_PRIuWORD, L4_PRIxWORD, L4_PRIXWORD, L4_SCNdWORD,
	L4_SCNiWORD, L4_SCNoWORD, L4_SCNuWORD, L4_SCNxWORD, L4_SCNXWORD):
	New macros.

	* l4/types.h (L4_WORD_C): Fix macro.

	* l4.h (l4_init): Move to ...
	* l4/init.h (l4_init): ... here.  New file.

	* l4/kip.h (l4_api_version): Replace with always inlined static
	inline function.
	* l4/thread.h (_L4_EXTERN_INLINE): Do not define.  Replace all
	uses of it with static inline, and mark these functions with
	attribute __always_inline__.
	* l4/ipc.h (_L4_EXTERN_INLINE): Likewise.
	* l4/math.h (_L4_EXTERN_INLINE): Likewise.
	* l4/misc.h (_L4_EXTERN_INLINE): Likewise.
	* l4/schedule.h (_L4_EXTERN_INLINE): Likewise.
	* l4/space.h (_L4_EXTERN_INLINE): Likewise.
	* ia32/l4/bits/math.h (_L4_EXTERN_INLINE): Likewise.
	* ia32/l4/bits/space.h (_L4_EXTERN_INLINE): Likewise.
	* ia32/l4/bits/stubs-init.h (_L4_EXTERN_INLINE): Likewise.
	* ia32/l4/bits/syscall.h (_L4_EXTERN_INLINE): Likewise.
	* ia32/l4/bits/vregs.h (_L4_EXTERN_INLINE): Likewise.
	* l4/kip.h (_L4_EXTERN_INLINE): Likewise.
	* l4.h (_L4_EXTERN_INLINE): Likewise.
	* ia32/l4/bits/vregs.h (__l4_utcb): Mark with attributes
	always_inline and const.
	* globals.c, ipc.c, kip.c, l4.c, math.c, misc.c, schedule.c,
	space.c, stubs-init.c, stubs.c, syscall.c, thread.c, vregs.c:
	Files removed.
	* Makefile.am (lib_LIBRARIES): Variable removed.
	(libl4_a_SOURCES): Likewise.
	(libl4_a_CFLAGS): Likewise.

2003-09-18  Marcus Brinkmann  <marcus@gnu.org>

	* l4/kip.h (l4_get_kernel_interface): Rename to ...
	(l4_kip): ... this.  Also in all callers.
	* ia32/l4/bits/stubs-init.h (__L4_SETUP_SYSCALL): Likewise in
	caller.

	* l4/kip.h (l4_min_page_size): New function.
	(l4_min_page_size_log2): Likewise.

	* l4/types.h (L4_WORD_C): Define macro.

2003-09-17  Marcus Brinkmann  <marcus@gnu.org>

	* l4/math.h (__l4_msb): Rename to ...
	(l4_msg): ... this.  Return 1 more, so the least significant bit
	is 1 (to match ffs() behaviour).  Call __l4_msb(), not
	__l4_msb_().
	(l4_lsb): New function.
	* ia32/l4/bits/math.h (__l4_msb_): Rename to ...
	(__l4_msb): ... this.  Add one to result.
	(__l4_lsb): New function.
	* l4/space.h (l4_fpage): Subtract one from MSB.  Check that size
	is not zero before using MSB.

2003-09-08  Marcus Brinkmann  <marcus@gnu.org>

	* l4/space.h (l4_is_nil_fpage): New function.
	(l4_complete_address_space): Fix initializer.

	* l4/types.h: Fix size of error field.

	* l4/ipc.h (l4_ipc_succeeded): Invert return value.
	(l4_ipc_failed): Likewise.
	(l4_msg_word): New function.

2003-07-26  Marcus Brinkmann  <marcus@gnu.org>

	* Initial check-in.

