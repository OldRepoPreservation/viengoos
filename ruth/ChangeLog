2008-01-01  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Remove activity_properties test.  Replace with
	activity_policy test.

2007-12-25  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Change visit to be consistent with as_walk's
	expected function signature.  Update rm_folio_object_alloc use to
	reflect API changes.

2007-12-24  Neal H. Walfield  <neal@gnu.org>

	* ia32-cmain.c (exit): Declare.
	(finish): Cast PROGRAM_NAME.

2007-12-22  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Update rm_folio_alloc use to reflect API changes.

2007-12-14  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Only check the objects contained immediately
	within a folio for shadow objects.

2007-12-13  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Update users of folio_object_alloc to interface
	change.

2007-12-10  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Don't call rm_activity_create.

2007-12-04  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Update to use new rm_thread_exregs interface.

2007-11-29  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Add test for activity_properties.

2007-11-28  Neal H. Walfield  <neal@gnu.org>

	* ruth.c: Include <hurd/activity.h>.
	(main): Add test for activity_create.

2007-11-23  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Don't call rm_object_slot_copy_in to update the
	address space slot.  Just use rm_thread_exregs.  Add test for
	pthread library.

	* ia32-cmain.c (cmain): If _pthread_init_routine is not NULL, call
	it.  Otherwise, just call finish directly.

2007-11-22  Neal H. Walfield  <neal@gnu.org>

	* ruth.c: Include <hurd/thread.h>.
	(main): Add test case for thread creation.

2007-11-22  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Update uses of stroage_alloc to its new
	interface.

2007-11-20  Neal H. Walfield  <neal@gnu.org>

	* ia32-cmain.c (finish): New function.
	(cmain): Call _pthread_init_routine.  Switch to the new sp and
	jump to finish.  Move argument passing there.
	* ia32-crt0.S (STACK_SIZE): Change to a single page.

2007-11-19  Neal H. Walfield  <neal@gnu.org>

	* ruth.c (main): Use ADDR_TO_PTR and PTR_TO_ADDR correctly.

2007-11-16  Neal H. Walfield  <neal@gnu.org>

	* Makefile.am (ruth_CPPFLAGS): Move value from here...
	(COMMON_CPPFLAGS): ... to this new variable.
	(ruth_CPPFLAGS): Set to COMMON_CPPFLAGS.
	(ruth_SOURCES): Remove task-user.h, task-user.c and mmap.c.
	(ruth_LDADD): Remove ../libhurd-cap-server/libhurd-cap-server.a
	and ../viengoos/libhurd-cap.a.
	* ruth.h: Don't include <hurd/cap-server.h>.
	(program_name): Make const.
	* ruth.c: Rewrite.
	* output.h: Include <stdarg.h>.
	(shutdown): Don't declare.
	(program_name): Likewise.
	(output_debug): Likewise.
	(debug): Don't define.
	(panic): Don't define.
	(vprintf): New declaration.
	* output.c: Don't include <hurd/wortel.h>.
	Include <hurd/rm.h>.
	(output_debug): Don't define.
	(shutdown): Don't call wortel_shutdown.
	(putchar): Call rm_putchar, not wortel_putchar.
	(vprintf): New function.  Body copied from printf.
	(printf): Implement in terms of vprintf.
	* malloc.c: Update to version 2.8.3.
	* malloc-wrap.c (ABORT): Define.
	(ABORT_ON_ASSERT_FAILURE): Likewise.
	(LACKS_SYS_TYPES_H): Likewise.
	(size_t): New definition.
	(LACKS_STDLIB_H): Likewise.
	(LACKS_STDIO_H): Likewise.
	(MORECORE): Don't define.
	(HAVE_MORECORE): Define to 0.
	* ia32-crt0.S (STACK_SIZE): Increase to 32 pages.  Set
	__hurd_startup_data to the value of %sp.
	* ia32-cmain.c: Rewrite.
	* panic.c: New file.
	* mmap.c: Remove file.
	* task-user.h: Likewise.
	* task-user.c: Likewise.

2005-04-06  Neal H. Walfield  <neal@gnu.org>

	* mmap.c: Include <hurd/anonymous.h>.
	(mmap): Call hurd_anonymous_allocate, not hurd_vm_allocate.
	(munmap): Call hurd_vm_release, not hurd_vm_deallocate.

2005-01-22  Marcus Brinkmann  <marcus@gnu.org>

	* Initial check-in.
